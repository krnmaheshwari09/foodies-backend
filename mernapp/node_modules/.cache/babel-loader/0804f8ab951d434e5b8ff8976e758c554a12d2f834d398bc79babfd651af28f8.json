{"ast":null,"code":"import React,{useEffect,useRef,useState}from\"react\";import{useCart,useDispatchCart}from\"./ContextReducer\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function Card(props){let dispatch=useDispatchCart();let data=useCart();const priceRef=useRef();let options=props.item.options[0];let priceOptions=Object.keys(options);const[qty,setQty]=useState(1);const[size,setSize]=useState();const handleAddToCart=async()=>{let food=[];for(const item of data){if(item.id===props.item._id){food=item;break;}}if(food.length!==0){if(food.size===size){await dispatch({type:\"UPDATE\",id:props.item._id,price:finalPrice,qty:qty});}else{await dispatch({type:\"ADD\",id:props.item._id,name:props.item.name,price:finalPrice,qty:qty,size:size,img:props.item.img});}}else{await dispatch({type:\"ADD\",id:props.item._id,name:props.item.name,price:finalPrice,qty:qty,size:size,img:props.item.img});}// console.log(data);\n};let finalPrice=qty*parseInt(options[size]);useEffect(()=>{setSize(priceRef.current.value);},[]);return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"div\",{className:\"card mt-3\",style:{width:\"18rem\",height:\"450px\"},children:[/*#__PURE__*/_jsx(\"img\",{src:props.item.img,className:\"card-img-top object-fit-fill h-50\",alt:\"...\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h5\",{className:\"card-title\",children:props.item.name}),/*#__PURE__*/_jsxs(\"div\",{className:\"container w-100\",children:[/*#__PURE__*/_jsx(\"select\",{className:\"m-2 h-100 bg-success rounded\",onChange:e=>setQty(e.target.value),children:Array.from(Array(6),(e,i)=>{return/*#__PURE__*/_jsx(\"option\",{value:i+1,children:i+1},i+1);})}),/*#__PURE__*/_jsx(\"select\",{className:\"m-2 h-100 bg-success rounded\",ref:priceRef,onChange:e=>setSize(e.target.value),children:priceOptions.map(data=>{return/*#__PURE__*/_jsx(\"option\",{value:data,children:data},data);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-inline h-100 fs-5\",children:[\"Price: \\u20B9\",finalPrice,\"/-\"]}),/*#__PURE__*/_jsx(\"hr\",{}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-success justify-center ms-2\",onClick:handleAddToCart,children:\"Add to Cart\"})]})]})})});}","map":{"version":3,"names":["React","useEffect","useRef","useState","useCart","useDispatchCart","jsx","_jsx","jsxs","_jsxs","Card","props","dispatch","data","priceRef","options","item","priceOptions","Object","keys","qty","setQty","size","setSize","handleAddToCart","food","id","_id","length","type","price","finalPrice","name","img","parseInt","current","value","children","className","style","width","height","src","alt","onChange","e","target","Array","from","i","ref","map","onClick"],"sources":["D:/Projects/food_delivery_app/mernapp/src/components/Card.jsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\r\nimport {useCart, useDispatchCart} from \"./ContextReducer\";\r\n\r\nexport default function Card(props) {\r\n  let dispatch = useDispatchCart();\r\n  let data = useCart();\r\n  const priceRef = useRef();\r\n  let options = props.item.options[0];\r\n  let priceOptions = Object.keys(options);\r\n  const [qty, setQty] = useState(1);\r\n  const [size, setSize] = useState();\r\n  const handleAddToCart = async () => {\r\n    let food = []\r\n    for(const item of data){\r\n      if(item.id === props.item._id){\r\n        food = item;\r\n        break;\r\n      }\r\n    }\r\n    if(food.length !== 0){\r\n      if(food.size === size){\r\n        await dispatch({type: \"UPDATE\", id: props.item._id, price: finalPrice, qty: qty})\r\n      }else{\r\n        await dispatch({type: \"ADD\", id: props.item._id, name: props.item.name, price: finalPrice, qty: qty, size: size, img: props.item.img});\r\n      }\r\n    }else{\r\n      await dispatch({type: \"ADD\", id: props.item._id, name: props.item.name, price: finalPrice, qty: qty, size: size, img: props.item.img});\r\n    }\r\n    \r\n    // console.log(data);\r\n  };\r\n  let finalPrice = qty * parseInt(options[size]);\r\n  useEffect(() => {\r\n    setSize(priceRef.current.value)\r\n  }, [])\r\n  return (\r\n    <div>\r\n      <div>\r\n        <div className=\"card mt-3\" style={{ width: \"18rem\", height: \"450px\" }}>\r\n          <img\r\n            src={props.item.img}\r\n            className=\"card-img-top object-fit-fill h-50\"\r\n            alt=\"...\"\r\n          />\r\n          <div className=\"card-body\">\r\n            <h5 className=\"card-title\">{props.item.name}</h5>\r\n            {/* <p className=\"card-text text-muted small\">{props.item.description}</p> */}\r\n            <div className=\"container w-100\">\r\n              <select className=\"m-2 h-100 bg-success rounded\" onChange={(e) => setQty(e.target.value)}>\r\n                {Array.from(Array(6), (e, i) => {\r\n                  return (\r\n                    <option value={i + 1} key={i + 1}>\r\n                      {i + 1}\r\n                    </option>\r\n                  );\r\n                })}\r\n              </select>\r\n              <select className=\"m-2 h-100 bg-success rounded\" ref={priceRef} onChange={(e) => setSize(e.target.value)}>\r\n                {priceOptions.map((data) => {\r\n                  return (\r\n                    <option key={data} value={data}>\r\n                      {data}\r\n                    </option>\r\n                  );\r\n                })}\r\n              </select>\r\n            </div>\r\n            <div className=\"d-inline h-100 fs-5\">Price: â‚¹{finalPrice}/-</div>\r\n            <hr />\r\n            <button\r\n              className=\"btn btn-success justify-center ms-2\"\r\n              onClick={handleAddToCart}\r\n            >\r\n              Add to Cart\r\n            </button>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}